<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>CRUD3</title>
</head>

<body>
	<h3 align="center">Descrição </h3>
	<p align="center">Toda vez que adicionar ou remover uma pessoa tem que refletir na lista impressa, seguindo as
		regras de validação</p>

	<h3 align="center">Regras de validação: </h3>
	<p> 1 - Caso a idade seja <b>MENOR</b> do que 18 anos apesentar mensagem no SPAN de <b style="color:red">ERRO</b>
		com o seguite texto: '{NomeDaPessoa} não pode ser adicionada' e a cor do texto para <b
			style="color:red">VERMELHO</b>. </p>
	<p> 2 - Caso a idade seja <b>MAIOR</b> do que 18 anos apesentar mensagem no SPAN de <b>SUCESSO</b> com o seguite
		texto: 'Pessoa adicionada com sucesso' e a cor do texto para preto. </p>
	<p> 3 - Caso a pessoa não tenha mais do que 18 anos, não é para ser impressa e nem adicionada no array. </p>
	<h3 align="center">Dicas</h3>
	<p> 1 - Para mudar a cor do texto você precisa pegar o element ex: document.getElementById("id").style.color =
		"black"; ou "red" se for mensagem de erro </p>
	<p> 2 - Para manipular o checkbox é simples, Ativar: 'document.getElementById("id").checked = true'; Desativar:
		'document.getElementById("id").checked = false'</p>

	<hr>
	</br>
	</br>
	</br>
	<!-- ADICIONAR/ALTERAR PESSOAS:-->
	Nome: <input type="text" id="nomePessoaId" /> </br>
	Idade: <input type="text" id="idadePessoaId" /></br>
	Ativa: <input type="checkbox" id="pessoaAtivaId" checked="true" /></br>
	<input type="button" value="Adicionar Pessoa" onclick="adicionarPessoa(nomePessoaId.value, idadePessoaId.value)">
	</br>

	</br>

	<!-- IMPRIMIR LISTA PESSOAS:-->
	<div id="divTable">
		<table border="1" id="tabelaPessoas">
			<tbody>
				<tr>
					<th width="100px" align="center">Nome:</th>
					<th width="100px" align="center">Idade</th>
					<th width="100px" align="center">Ativo</th>
					<th width="100px" align="center">Remove</th>

				</tr>
				<tr>

				</tr>
			</tbody>
		</table>
	</div>
	<br>
	<!-- SPAN:-->
	<span id="mensagemErro" style="color:red"></span>
	<span id="mensagemSucesso" style="color:blue"></span>

	<!-- Pessoas inativas -->
	<h3>Lista de pessoas inativas</h3>
	<ul id="elementoUlPessoasInativas">

	</ul>


	<script>
		//ARRAY:
		var pessoasArray = [
			{ nome: "rafael", idade: 34, ativo: true }
		];

		//ADICIONAR PESSOA
		var adicionarPessoa = function (nomePessoaId, idadePessoaId) {
			if (idadePessoaId < 18) {
				if (nomePessoaId == pessoasArray.nome) {
					var span = document.getElementById("mensagemErro");
					span.innerText = nomePessoaId + ' não pode ser adicionado(a).';
					alert(nomePessoaId + " não pode ser adicionado(a).");
				}
			} else {
				var span = document.getElementById("mensagemSucesso");
				span.innerText = nomePessoaId + ' foi adicionado(a).';
				var pessoaSalva = { nome: nomePessoaId, idade: idadePessoaId, ativo: true };
				pessoasArray.push(pessoaSalva);
				adicionarListaInativoPeloInput(nomePessoaId, idadePessoaId)
			}
			carregarLista();
		}

		//LISTA PESSOAS DESATIVADAS:CHECKBOX
		function adicionarListaInativoPeloInput(nomePessoaId, idadePessoaId) {
			var checkBox = document.getElementById("pessoaAtivaId");

			if (checkBox.checked == false) {
				var ulElement = document.getElementById("elementoUlPessoasInativas");
				var liElement = document.createElement("li");
				var textNode = document.createTextNode('Nome: ' + nomePessoaId + ', idade: ' + idadePessoaId);
				liElement.appendChild(textNode);
				ulElement.appendChild(liElement);
			}
		}

		//LIMPAR TABELA				
		var limparTable = function (table) {
			var divTable = document.getElementById("divTable");
			divTable.children[0].remove();
			var table = document.createElement("table");
			table.id = "tabelaPessoas";
			table.border = 1;
			var th = document.createElement("tr");
			var nomeTd = document.createElement("th");
			nomeTd.innerText = "Nome";

			var nomeTd = document.createElement("th");
			var idadeTd = document.createElement("th");
			var ativoTd = document.createElement("th");
			var removeTd = document.createElement("th");

			nomeTd.innerText = "Nome";
			nomeTd.width = 100;
			nomeTd.align = "center";

			idadeTd.innerText = "Idade";
			idadeTd.width = 100;
			idadeTd.align = "center";

			ativoTd.innerText = "Ativo";
			ativoTd.width = 100;
			ativoTd.align = "center";

			removeTd.innerText = "Remove";
			removeTd.width = 100;
			removeTd.align = "center";

			th.appendChild(nomeTd);
			th.appendChild(idadeTd);
			th.appendChild(ativoTd);
			th.appendChild(removeTd);
			table.appendChild(th);
			divTable.append(table);
		}

		//CHECKBOX DESATIVADO
		/*	function remove() {
				var checkBoxfunction = document.getElementsByTagName("tbody")[0].getElementsByTagName("tr");
				var i = checkBoxfunction.length;
				while (i--) {
					if (!checkBoxfunction[i].getElementsByTagName("input")[0].checked) {
						checkBoxfunction[i].parentNode.removeChild(checkBoxfunction[i]);
						adicionarListaInativo();
					}
				}
			}*/

		//REMOVER PESSOA
		function deleteRow(deletar) {
			var i = deletar.parentNode.parentNode.rowIndex;
			document.getElementById("tabelaPessoas").deleteRow(i);
		}

		//CARREGAR A TABELA:
		var carregarLista = function () {
			limparTable();
			for (i = 0; i < pessoasArray.length; i++) {
				var objetoIterado = pessoasArray[i];
				createElements(tabelaPessoas, objetoIterado);
			}
		}

		//AÇÃO ATIVO:
		var acaoAtivo = function (checkbox, objeto) {
			var check = [];
			var idTable = document.getElementById("tabelaPessoas");
			var percorrerTable = idTable.children.length;

			alert("checkbox" + checkbox.checked);
			for (var i = 0; i < percorrerTable; i++) {
				if (checkbox.checked == false) {
					alert("checkbox" + checkbox.checked);
					var ulElement = document.getElementById("elementoUlPessoasInativas");
					var liElement = document.createElement("li");
					var textNode = document.createTextNode('Nome: ' + percorrerTable[i].nome + ', idade: ' + percorrerTable[i].idade);
					liElement.appendChild(textNode);
					ulElement.appendChild(liElement);
				} else {
					check.push(idTable);
				}
			}
		}


		//CRIAR ELEMENTOS:
		var createElements = function (table, objeto) {
			var createTr = table.insertRow(1);
			var createTd = createTr.insertCell(0);
			var createTd1 = createTr.insertCell(1);
			var createTd2 = createTr.insertCell(2);
			var createTd3 = createTr.insertCell(3);
			createTd.innerText = objeto.nome;
			createTd1.innerText = objeto.idade;
			createTd2.innerHTML = "<input type='checkbox' checked='true' id='pessoaAtivaIdtable' onchange='acaoAtivo(this, " + JSON.stringify(objeto) + ")'>";
			createTd3.innerHTML = "<input type='button' value='Delete' onclick='deleteRow(this)'>";

		}

	</script>
</body>

</html>