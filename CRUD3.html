<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>CRUD3</title>
</head>

<body>
	<h3 align="center">Descrição </h3>
	<p align="center">Toda vez que adicionar ou remover uma pessoa tem que refletir na lista impressa, seguindo as
		regras de validação</p>

	<h3 align="center">Regras de validação: </h3>
	<p> 1 - Caso a idade seja <b>MENOR</b> do que 18 anos apesentar mensagem no SPAN de <b style="color:red">ERRO</b>
		com o seguite texto: '{NomeDaPessoa} não pode ser adicionada' e a cor do texto para <b
			style="color:red">VERMELHO</b>. </p>
	<p> 2 - Caso a idade seja <b>MAIOR</b> do que 18 anos apesentar mensagem no SPAN de <b>SUCESSO</b> com o seguite
		texto: 'Pessoa adicionada com sucesso' e a cor do texto para preto. </p>
	<p> 3 - Caso a pessoa não tenha mais do que 18 anos, não é para ser impressa e nem adicionada no array. </p>
	<h3 align="center">Dicas</h3>
	<p> 1 - Para mudar a cor do texto você precisa pegar o element ex: document.getElementById("id").style.color =
		"black"; ou "red" se for mensagem de erro </p>
	<p> 2 - Para manipular o checkbox é simples, Ativar: 'document.getElementById("id").checked = true'; Desativar:
		'document.getElementById("id").checked = false'</p>

	<hr>
	</br>
	</br>
	</br>
	<!-- ADICIONAR/ALTERAR PESSOAS:-->
	Nome: <input type="text" id="nomePessoaId" value="aaaa" /> </br>
	Idade: <input type="text" id="idadePessoaId" value="18" /></br>
	Ativa: <input type="checkbox" id="pessoaAtivaId" checked="true" /></br>
	<input type="button" value="Adicionar Pessoa" onclick="adicionarPessoa(nomePessoaId.value, idadePessoaId.value)">
	</br>

	</br>

	<!-- IMPRIMIR LISTA PESSOAS:-->
	<table border="1" id="tabelaPessoas">
		<tbody>
			<tr>
				<th width="100px" align="center">Nome</th>
				<th width="100px" align="center">Idade</th>
				<th width="100px" align="center">Ativo</th>
				<th width="100px" align="center">Remove</th>
			</tr>
			<tr>
				<td>Rafael</td>
				<td>33</td>
				<td><input type="checkbox" checked="true"
						onclick="adicionarListaInativo(nomePessoaId.value, idadePessoaId.value)"></td>
				<td><input type="button" value="Delete" onclick="deleteRow(this)"></td>
			</tr>
		</tbody>
	</table>
	<br>
	<!-- SPAN:-->
	<span id="mensagemErro" style="color:red"></span>
	<span id="mensagemSucesso" style="color:blue"></span>

	<!-- Pessoas inativas -->
	<h3>Lista de pessoas inativas</h3>
	<ul id="elementoUlPessoasInativas">

	</ul>


	<script>
		//ARRAY:
		var pessoasArray = [
			{ nome: "rafael", idade: 34, ativo: true }
		];

		//ADICIONAR PESSOA
		var adicionarPessoa = function (nomePessoaId, idadePessoaId) {
			if (idadePessoaId < 18) {
				var span = document.getElementById("mensagemErro");
				span.innerText = nomePessoaId + ' não pode ser adicionado(a).';
				alert(nomePessoaId + " Não pode ser adicionada");
				adicionarListaInativo(nomePessoaId, idadePessoaId);
			} else {
				var span = document.getElementById("mensagemSucesso");
				span.innerText = nomePessoaId + ' foi adicionado(a).';
				var pessoaSalva = { nome: nomePessoaId, idade: idadePessoaId, ativo: true };
				pessoasArray.push(pessoaSalva);
				carregarLista();
			}
		}

		//LISTA PESSOAS DESATIVADAS:CHECKBOX
		function adicionarListaInativo(nomePessoaId, idadePessoaId) {
			var checkBox = document.getElementById("pessoaAtivaId");

			if (checkBox.checked == false) {
				var ulElement = document.getElementById("elementoUlPessoasInativas");
				var liElement = document.createElement("li");
				var textNode = document.createTextNode('Nome: ' + nomePessoaId + ', idade: ' + idadePessoaId);
				liElement.appendChild(textNode);
				ulElement.appendChild(liElement);
			}
		}

		//LIMPAR TABELA				
		var limparTable = function () {
			var elementoTable = document.getElementById("tabelaPessoas");
			var tableTotal = elementoTable.rows.length;

			for (var i = 0; i < tableTotal; i++) {
				elementoTable.deleteRow(1);
			}
		}

		//CHECKBOX DESATIVADO
		function remove() {
			var checkBoxfunction = document.getElementsByTagName("tbody")[0].getElementsByTagName("tr");
			var i = checkBoxfunction.length;
			while (i--) {
				if (!checkBoxfunction[i].getElementsByTagName("input")[0].checked) {
					checkBoxfunction[i].parentNode.removeChild(checkBoxfunction[i]);
					adicionarListaInativo();
				}
			}
		}

		//REMOVER PESSOA
		function deleteRow(deletar) {
			var i = deletar.parentNode.parentNode.rowIndex;
			document.getElementById("tabelaPessoas").deleteRow(i);
		}

		//CARREGAR A TABELA:
		var carregarLista = function () {
			for (i = 0; i < pessoasArray.length; i++) {
				var objetoIterado = pessoasArray[i];
				createElements(tabelaPessoas, objetoIterado);
			}
		}

		//CRIAR ELEMENTOS:
		var createElements = function (table, objeto) {

			var createTr = table.insertRow(1);
			var createTd = createTr.insertCell(0);
			var createTd1 = createTr.insertCell(1);
			var createTd2 = createTr.insertCell(2);
			var createTd3 = createTr.insertCell(3);
			createTd.innerText = objeto.nome;
			createTd1.innerText = objeto.idade;
			createTd2.innerHTML = "<input type='checkbox' checked='true' onclick='adicionarListaInativo(nomePessoaId.value, idadePessoaId.value)' onclick='remove(this)'>";
			createTd2.innerHTML = "<input type='checkbox' checked='true' onclick='remove(this)'>";
			createTd3.innerHTML = "<input type='button' value='Delete' onclick='deleteRow(this)'>";
		}

	</script>
</body>

</html>