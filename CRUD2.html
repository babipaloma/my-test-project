<html>

<body>
	<p>Descrição: Faça o CRUD da mesma forma que você fez no exercicio passado, mas dessa vez você vai perceber que as
		funções recebem parametros de input. </p>
	<p>Novidade: Você agora vai trabalhar com a tag SELECT baseado na opão escolhida você remove. </p>
	<p>Regras de validação: Caso a idade seja menor do que 18 anos você tem que apresentar uma mensagem de erro no SPAN
		de mensagem de resposta com o texto em vermelho, caso adicionar no array com sucesso mude o texto da mensagem
		para 'Pessoa adicionada com sucesso' e a cor do texto para preto. </p>
	<p>Dica: Para mudar a cor do texto você precisa pegar o element ex: document.getElementById("id").style.color =
		"black"; ou "red" se for mensagem de erro </p>

	<!-- ADICIONAR/ALTERAR PESSOAS:-->
	<input type="text" id="nomePessoaId" /> Nome </br>
	<input type="text" id="idadePessoaId" /> Idade </br>
	<input type="button" value="Adicionar Pessoa" onclick="adicionarPessoa(nomePessoaId.value, idadePessoaId.value)">
	</br>
	<input type="button" value="Alterar Pessoa" onclick="alterarPessoa(nomePessoaId.value, idadePessoaId.value)"> </br>

	</br>
	<!-- SELECT REMOVER PESSOAS:-->
	Selecionar pessoa para remover: </br>
	<select id="pessoaSelecionadaIdSelect">
		<option value="0"></option>
	</select>
	<!-- REMOVER PESSOAS:-->
	<input type="button" value="Remover Pessoa" onclick="removerPessoa(pessoaSelecionadaIdSelect.value)"> </br>

	<!-- IMPRIMIR LISTA PESSOAS:-->
	<p> Imprimir a variável pessoasArray aqui nos LI ´s</p>
	<ul id="listaPessoas">

	</ul>
	<!-- LIMPAR LISTA PESSOAS:-->
	<input type="button" value="Limpar lista" onclick="limparUl()"> </br>
	</br>
	<!-- SPAM:-->
	<span id="mensagemRespostaId" style="color:blue"> Teste idade</span>

	<script>
		//ARRAY:
		var pessoasArray = [

		];

		//FUNÇÃO ADD PESSOAS:
		var adicionarPessoa = function (nome, idade) {
			var nomePessoaId = document.getElementById("nomePessoaId").value;
			var idadePessoaId = document.getElementById("idadePessoaId").value;


			var mensagemSpan = document.getElementById("mensagemRespostaId");
			if (idadePessoaId < 18) {
				document.getElementById("mensagemRespostaId").style.color = "red";

			}
			else {
				document.getElementById("mensagemRespostaId").style.color = "black";

				var pessoaSalva = { nome: nomePessoaId, idade: idadePessoaId };

				pessoasArray.push(pessoaSalva);

				carregarLista();
				selectList();
			}

		}

		//FUNÇÃO ALTERAR PESSOAS:
		var alterarPessoa = function (nome, idade) {
			var nomePessoaId = document.getElementById("nomePessoaId").value;
			var idadePessoaId = document.getElementById("idadePessoaId").value;
			var pessoaSalva = { nome: nomePessoaId, idade: idadePessoaId };

			for (i = 0; i < pessoasArray.length; i++) {
				if (pessoasArray[i].nome == nomePessoaId) {
					pessoasArray[i].idade = idadePessoaId;
				}
			}
			carregarLista();
			selectList();
		}

		//FUNÇÃO SELECT LIST:
		var selectList = function () {
			var selectElement = document.getElementById("pessoaSelecionadaIdSelect");
			for (i = 0; i < pessoasArray.length; i++) {
				var optionElement = document.createElement("option")
				var textNode = document.createTextNode(pessoasArray[i].nome);
				optionElement.appendChild(textNode);
				selectElement.appendChild(optionElement);
			}
		}

		//FUNÇÃO REMOVE:
		var removerPessoa = function () {
			var selectElemento = document.getElementById("pessoaSelecionadaIdSelect");
			selectElemento.remove(selectElemento.selectedIndex);
		}

		//FUNÇÃO VARRER SELECT:
		var limparSelect = function () {
			var optionElements = document.getElementById("pessoaSelecionadaIdSelect");
			var removerNomes = optionElements.children.length;
			for (i = removerNomes - 1; i >= 0; i--) {
				optionElements.children[i].remove();
			}
		}

		//FUNÇÃO LIMPAR LISTA:
		var limparUl = function () {
			var elementoUl = document.getElementById("listaPessoas");
			var tamanhoLista = elementoUl.children.length;
			for (i = tamanhoLista - 1; i >= 0; i--) {
				elementoUl.children[i].remove();
			}
		}

		//FUNÇÃO CARREGAR A LISTA:
		var carregarLista = function () {
			limparUl();
			limparSelect();
			var ulElement = document.getElementById("listaPessoas");
			for (i = 0; i < pessoasArray.length; i++) {
				var liElement = document.createElement("li")
				var textNode = document.createTextNode(' nome: ' + pessoasArray[i].nome + ', idade: ' + pessoasArray[i].idade);
				liElement.appendChild(textNode);
				ulElement.appendChild(liElement);
			}
			imprimirArray();
		}

		//IMPRIMIR PESSOAS:
		var imprimirArray = function () {
			console.log("Imprimindo pessoas:");
			for (var i = 0; i < pessoasArray.length; i++) {
				console.log("ObjetoLiteral", JSON.stringify(pessoasArray[i]));
			}
		}

	</script>
</body>

</html>